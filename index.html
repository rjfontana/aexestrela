<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AEX astronomia - Windows 95</title>
  <link rel="stylesheet" href="style95.css">
</head>
<body>
  <!-- Janela principal estilo Win95 -->
  <div class="window movable" id="main-window" style="margin-top: 80px; left: 100px; top: 100px; position: absolute; display: none;">
    <div class="title-bar" id="title-bar">
      <div class="title-bar-text">
        <img src="retro-computer.avif" alt="" style="width:18px;height:18px;vertical-align:middle;"> AEX astronomia
      </div>
      <div class="title-bar-controls">
        <button aria-label="Minimizar" id="minimize-btn">_</button>
        <button aria-label="Maximizar">‚ñ°</button>
        <button aria-label="Fechar" id="close-btn">√ó</button>
      </div>
    </div>
    <div class="window-body">
      <div class="window-body-inner">
        <h1>AEX astronomia</h1>
        <div id="results"><p>Aguardando sele√ß√£o...</p></div>
      </div>
    </div>
  </div>

  <!-- √Årea de trabalho com √≠cones em regi√µes diferentes -->
  <div class="desktop-icons-area">
    <!-- √çcone Observa√ß√µes no canto superior esquerdo -->
    <div class="icon desktop-shortcut" id="icon-observacoes" tabindex="0" title="Observa√ß√µes"
      style="position:fixed;left:40px;top:80px;z-index:100;display:flex;flex-direction:column;align-items:center;cursor:pointer;">
      <span style="font-size:38px;">üìÅ</span>
      <span style="font-size:13px;color:#003366;margin-top:2px;">Observa√ß√µes</span>
    </div>
    <!-- √çcone Estrelas no canto superior direito -->
    <div class="icon desktop-shortcut" id="icon-estrelas" tabindex="0" title="Estrelas"
      style="position:fixed;right:40px;top:80px;z-index:100;display:flex;flex-direction:column;align-items:center;cursor:pointer;">
      <span style="font-size:38px;">‚≠ê</span>
      <span style="font-size:13px;color:#003366;margin-top:2px;">Estrelas</span>
    </div>
    <!-- √çcone Quiz √ìptica no canto inferior direito -->
    <div class="icon desktop-shortcut" id="icon-quiz-optica" tabindex="0" title="Quiz √ìptica"
      style="position:fixed;right:40px;bottom:80px;z-index:100;display:flex;flex-direction:column;align-items:center;cursor:pointer;">
      <img src="quiz.png" alt="Quiz √ìptica" style="width:48px;height:48px;">
      <span style="font-size:13px;color:#003366;margin-top:2px;">Quiz √ìptica</span>
    </div>
    <!-- √çcone Formul√°rio no canto inferior esquerdo -->
    <div class="icon desktop-shortcut" id="icon-formulario" tabindex="0" title="Formul√°rio"
      style="position:fixed;left:40px;bottom:80px;z-index:100;display:flex;flex-direction:column;align-items:center;cursor:pointer;">
      <img src="forms.png" alt="Formul√°rio" style="width:48px;height:48px;">
      <span style="font-size:13px;color:#003366;margin-top:2px;">Formul√°rio</span>
    </div>
  </div>

  <!-- Barra de tarefas estilo Win95 -->
  <div class="taskbar">
    <button class="start-button" id="start-btn">
      <img src="retro-computer.avif" alt="Computador Retro" style="width:18px;height:18px;"> Iniciar
    </button>
    <div id="start-menu" style="display:none;position:fixed;bottom:38px;left:10px;z-index:12001;">
      <div style="background:#fff;border:2px solid #808080;border-radius:8px;box-shadow:2px 2px 8px #0002;padding:18px 18px 10px 18px;min-width:180px;position:relative;">
        <div id="argus-helper-menu" style="text-align:center; position:relative; min-height:140px;">
          <div style="display:inline-block; position:relative; background:#fff; border-radius:12px; padding:8px;">
            <img id="argus-gif-menu" src="argus.gif" alt="Argus Animado"
              style="width:140px;height:140px;display:block;position:relative;z-index:2;">
          </div>
          <div style="margin-top:8px;">
            <button id="argus-ajuda-btn" class="win95-btn" style="font-weight:bold; background:#fff; color:#003366; border:1px solid #b0c4de;">
              Argus
            </button>
          </div>
        </div>
      </div>
    </div>
    <button id="btn-salsaj" class="win95-btn" style="margin-left:12px;">
      ‚≠ê Fotometria
    </button>
    <button id="btn-tutorial-salsaj" class="win95-btn" style="margin-left:12px;">
      üìÑ Tutorial Salsaj
    </button>
    <button id="btn-historia" class="win95-btn" style="margin-left:12px;">
      üìö Hist√≥ria
    </button>
    <button id="btn-consultar" class="win95-btn" style="margin-left:12px;">
      üîç Consultar
    </button>
    <button id="btn-game" class="win95-btn" style="margin-left:14px;">
      üéÆ Game
    </button>
    <div class="clock" id="clock"></div>
  </div>
  <img src="Tales_de_Mileto-removebg-preview.png" alt="Tales de Mileto" class="bg-watermark" />

  <!-- Janela Fotometria (Salsaj) -->
  <div class="window movable" id="recursos-window" style="margin-top: 160px; left: 120px; top: 120px; position: absolute; display: none; max-width: 520px; min-width: 320px;">
    <div class="title-bar" id="recursos-title-bar">
      <div class="title-bar-text">
        <img src="https://img.icons8.com/color/24/000000/star--v1.png" alt="Salsaj" style="width:18px;height:18px;vertical-align:middle;"> Calculadora de Magnitude Relativa
      </div>
      <div class="title-bar-controls">
        <button aria-label="Fechar" id="recursos-close-btn">√ó</button>
      </div>
    </div>
    <div class="window-body">
      <div class="window-body-inner" style="padding: 10px;">
        <h3 style="color:#003366;">Calcule a magnitude relativa da estrela-alvo</h3>
        <form id="mag-form" style="margin-bottom:12px;">
          <label for="mag-ref">Magnitude da estrela de refer√™ncia:</label>
          <input type="number" step="any" id="mag-ref" required style="width:80px;">
          <br>
          <label for="flux-ref">Fluxo da estrela de refer√™ncia:</label>
          <input type="number" step="any" id="flux-ref" required style="width:80px;">
          <br>
          <label for="flux-alvo">Fluxo da estrela-alvo:</label>
          <input type="number" step="any" id="flux-alvo" required style="width:80px;">
          <br>
          <button type="submit" class="win95-btn" style="margin-top:8px;">Calcular</button>
        </form>
        <div id="mag-result" style="font-weight:bold;color:#1565c0;"></div>
        <p style="font-size:13px;color:#003366;margin-top:10px;">
          F√≥rmula: <b>m<sub>alvo</sub> = m<sub>ref</sub> - 2,5 √ó log<sub>10</sub>(f<sub>alvo</sub>/f<sub>ref</sub>)</b>
        </p>
      </div>
    </div>
  </div>

  <!-- Janela Tutorial Salsaj -->
  <div class="window movable" id="tutorial-salsaj-window" style="margin-top: 120px; left: 180px; top: 120px; position: absolute; display: none; max-width: 680px; min-width: 340px;">
    <div class="title-bar" id="tutorial-salsaj-title-bar">
      <div class="title-bar-text">
        <img src="https://img.icons8.com/color/24/000000/pdf.png" alt="PDF" style="width:18px;height:18px;vertical-align:middle;"> Tutorial Salsaj
      </div>
      <div class="title-bar-controls">
        <button aria-label="Fechar" id="tutorial-salsaj-close-btn">√ó</button>
      </div>
    </div>
    <div class="window-body">
      <div class="window-body-inner" style="padding: 10px;">
        <h3 style="color:#003366;">Tutorial SalsaJ (PDF)</h3>
        <iframe src="SalsaJ.pdf" style="width:100%;height:420px;border:2px inset #b0c4de;background:#fff;border-radius:8px;" title="Tutorial SalsaJ"></iframe>
        <div style="margin-top:12px;font-size:13px;color:#003366;">
          <a href="SalsaJ.pdf" download style="color:#1565c0;font-weight:bold;text-decoration:none;">
            <img src="https://img.icons8.com/color/24/000000/pdf.png" alt="PDF" style="vertical-align:middle;margin-right:6px;">
            Baixar Tutorial SalsaJ.pdf
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Janela Hist√≥ria -->
  <div class="window movable" id="historia-window" style="margin-top: 140px; left: 220px; top: 140px; position: absolute; display: none; max-width: 520px; min-width: 320px;">
    <div class="title-bar" id="historia-title-bar">
      <div class="title-bar-text">
        <img src="https://img.icons8.com/color/24/000000/book.png" alt="Hist√≥ria" style="width:18px;height:18px;vertical-align:middle;"> Hist√≥ria
      </div>
      <div class="title-bar-controls">
        <button aria-label="Fechar" id="historia-close-btn">√ó</button>
      </div>
    </div>
    <div class="window-body">
      <div class="window-body-inner" style="padding: 10px; text-align:center;">
        <img src="historia.png" alt="Hist√≥ria" style="max-width:100%;height:auto;border-radius:8px;box-shadow:0 2px 8px #0002;">
        <div style="margin-top:18px;">
          <button id="btn-audio-historia" class="win95-btn" style="font-weight:bold;">
            <img src="https://img.icons8.com/color/24/000000/speaker.png" style="vertical-align:middle;"> Play 
          </button>
          <audio id="audio-historia" src="audio.wav"></audio>
        </div>
      </div>
    </div>
  </div>

  <!-- Janela Consulta SIMBAD -->
  <div class="window movable" id="consulta-window" style="margin-top: 180px; left: 260px; top: 180px; position: absolute; display: none; max-width: 520px; min-width: 320px;">
    <div class="title-bar" id="consulta-title-bar">
      <div class="title-bar-text">
        <img src="https://img.icons8.com/color/24/000000/search--v1.png" alt="Consultar" style="width:18px;height:18px;vertical-align:middle;"> Consulta SIMBAD
      </div>
      <div class="title-bar-controls">
        <button aria-label="Fechar" id="consulta-close-btn">√ó</button>
      </div>
    </div>
    <div class="window-body">
      <div class="window-body-inner" style="padding: 10px;">
        <h3 style="color:#003366;">Consultar estrelas no SIMBAD</h3>
        <a href="https://simbad.u-strasbg.fr/simbad/sim-fid" target="_blank" class="lablink-btn">Abrir SIMBAD</a>
        <p style="margin-top:12px;font-size:13px;color:#003366;">Use o SIMBAD para buscar informa√ß√µes sobre estrelas de refer√™ncia e alvos para fotometria.</p>
      </div>
    </div>
  </div>

  <!-- Janela Jogo de Estrelas -->
  <div id="game-quiz-window" class="window movable" style="display:none;position:fixed;left:50vw;top:10vw;transform:translate(-50%,0);width:350px;max-width:96vw;z-index:7000;">
    <div class="title-bar">
      <span class="title-bar-text">
        <img src="https://img.icons8.com/color/24/000000/controller.png" style="vertical-align:middle;"> Game - Estrela <span id="game-quiz-num">1</span>/5
      </span>
      <div class="title-bar-controls">
        <button aria-label="Fechar" id="game-close-btn">√ó</button>
      </div>
    </div>
    <div class="window-body" style="text-align:center;">
      <img id="game-quiz-img" src="svul.png" alt="Estrela" style="max-width:90%;max-height:180px;margin:12px auto 18px auto;display:block;border-radius:10px;box-shadow:0 2px 8px #0002;">
      <div style="margin-bottom:16px;">De que estrela se trata?</div>
      <div id="game-quiz-options" style="display:flex;flex-direction:column;gap:10px;">
        <!-- Op√ß√µes ser√£o inseridas via JS -->
      </div>
      <div id="game-feedback" style="margin-top:18px;font-weight:bold;"></div>
    </div>
  </div>

  
  <script>
  // Observa√ß√µes - abre pasta no Google Drive
  document.getElementById('icon-observacoes').onclick = function() {
    window.open('https://drive.google.com/drive/folders/1Ez3YvUGNkTIeaO_KZ8BP_OmBjuZDdG9p?usp=sharing', '_blank');
  };

  // Estrelas - abre janela interna com imagem estrela.png (janela ocupa altura da √°rea de trabalho at√© a barra de tarefas)
  document.getElementById('icon-estrelas').onclick = function() {
    const img = new window.Image();
    img.src = 'estrela.png';
    img.onload = function() {
      // Calcula altura dispon√≠vel: altura da janela - altura da barra de tarefas (aprox. 40px)
      const taskbar = document.querySelector('.taskbar');
      const taskbarHeight = taskbar ? taskbar.offsetHeight : 40;
      const availableHeight = window.innerHeight - taskbarHeight - 32; // 16px padding em cima e embaixo
      const availableWidth = window.innerWidth - 80; // margem lateral

      let w = img.naturalWidth, h = img.naturalHeight;
      let scale = Math.min(availableWidth / w, availableHeight / h, 1.2); // at√© 1.2x se for pequena
      w = Math.round(w * scale);
      h = Math.round(h * scale);

      const win = document.createElement('div');
      win.className = 'window movable';
      win.style.position = 'fixed';
      win.style.left = '50%';
      win.style.top = '0';
      win.style.transform = `translateX(-50%)`;
      win.style.width = (w + 32) + 'px'; // 16px padding cada lado
      win.style.height = (h + 56) + 'px'; // 40px title + 16px padding
      win.style.maxWidth = '98vw';
      win.style.maxHeight = availableHeight + 40 + 'px';
      win.style.zIndex = 5000 + Math.floor(Math.random()*1000);
      win.innerHTML = `
        <div class="title-bar" style="display:flex;align-items:center;">
          <img src="https://img.icons8.com/color/24/000000/star--v1.png" alt="Estrela" style="margin-right:8px;">
          <span style="font-weight:bold;">Estrelas</span>
          <span style="flex:1"></span>
          <button aria-label="Fechar" class="estrelas-close-btn" style="margin-left:8px;">√ó</button>
        </div>
        <div class="window-body" style="padding:16px;display:flex;justify-content:center;align-items:center;height:${h}px;">
          <img src="estrela.png" alt="Estrelas" style="width:${w}px;height:${h}px;max-width:100%;max-height:100%;border-radius:12px;box-shadow:0 2px 12px #0002;">
        </div>
      `;
      document.body.appendChild(win);

      // Fechar janela
      win.querySelector('.estrelas-close-btn').onclick = function() {
        win.remove();
      };

      // Movimentar janela estilo Win95
      let isDragging = false, offsetX = 0, offsetY = 0;
      win.querySelector('.title-bar').addEventListener('mousedown', function(e) {
        if (e.button !== 0) return;
        isDragging = true;
        const rect = win.getBoundingClientRect();
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;
        document.body.style.userSelect = 'none';
        function dragMove(ev) {
          if (!isDragging) return;
          win.style.left = (ev.clientX - offsetX) + 'px';
          win.style.top = (ev.clientY - offsetY) + 'px';
          win.style.transform = '';
        }
        function dragUp() {
          isDragging = false;
          document.body.style.userSelect = '';
          document.removeEventListener('mousemove', dragMove);
          document.removeEventListener('mouseup', dragUp);
        }
        document.addEventListener('mousemove', dragMove);
        document.addEventListener('mouseup', dragUp);
      });
      win.addEventListener('mousedown', () => {
        win.style.zIndex = 5000 + Math.floor(Math.random()*1000);
      });
    };
  };

  // Quiz √ìptica - abre site do quiz de √≥ptica
  document.getElementById('icon-quiz-optica').onclick = function() {
    window.open('https://rjfontana.github.io/Telescopio/', '_blank');
  };

  // Formul√°rio - abre Google Forms
  document.getElementById('icon-formulario').onclick = function() {
    window.open('https://forms.gle/BTM21gP8BU8kEWHN9', '_blank');
  };

  // Bot√£o iniciar abre/fecha menu
  const startBtn = document.getElementById('start-btn');
  const startMenu = document.getElementById('start-menu');
  startBtn.onclick = function() {
    startMenu.style.display = startMenu.style.display === 'none' ? 'block' : 'none';
  };
  document.addEventListener('mousedown', function(e) {
    if (!startMenu.contains(e.target) && e.target !== startBtn) {
      startMenu.style.display = 'none';
    }
  });

  // Bot√£o de ajuda Argus dentro do menu iniciar
  document.getElementById('argus-ajuda-btn').onclick = function() {
    const win = document.createElement('div');
    win.className = 'window movable';
    win.style.position = 'fixed';
    win.style.right = '90px';
    win.style.bottom = '80px';
    win.style.minWidth = '320px';
    win.style.maxWidth = '98vw';
    win.style.zIndex = 12001;
    win.innerHTML = `
      <div class="title-bar">
        <span class="title-bar-text">
          <img src="argus.png" alt="Argus" style="width:18px;height:18px;vertical-align:middle;"> Argus
        </span>
        <div class="title-bar-controls">
          <button aria-label="Fechar" class="argus-close-btn">√ó</button>
        </div>
      </div>
      <div class="window-body">
        <div class="window-body-inner" style="min-height:120px;">
          <h3 style="color:#003366;">Vamos colocar o M√©todo Cient√≠fico em a√ß√£o! Primeiro, vamos definir uma hip√≥tese: ‚Äúo brilho das estrelas n√£o varia‚Äù. Depois, vamos selecionar estrelas para observar com o Argus, que ser√£o nossas estrelas-alvo. A partir do registro do brilho estelar em diferentes dias de observa√ß√£o, vamos ver como nossos dados se relacionam com a nossa hip√≥tese.<br><br>
Use o SalsaJ para obter o fluxo das estrelas-alvo e das estrelas de refer√™ncia (que n√£o pode ser vari√°vel)<br>
Abra o SalsaJ<br>
Ficheiro > Abrir > Selecionar as observa√ß√µes da estrela-alvo (os arquivos precisam estar nomeados em ordem cronol√≥gica)<br>
Janela > Cascata (para deixar as observa√ß√µes em ordem cronol√≥gica, porque o SalsaJ quando abre inverte a ordem)<br>
Analisar > Fotometria > clica no centro da estrela-alvo na ordem de tr√°s para frente dos arquivos para gerar a linha informa√ß√£o de ‚Äúintensidade‚Äù na janela de Fotometria<br>
Selecione as linhas da janela Fotometria e cola no Excel/Google Planilhas<br>
Calcule a magnitude das estrelas-alvo a partir da rela√ß√£o m1 - m2 = - 2,5 log(f1/f2) usando a informa√ß√£o de magnitude da estrela de refer√™ncia para o filtro escolhido encontrada no Simbad (https://simbad.cds.unistra.fr/simbad/sim-fid ou Aladin)<br>
Preencha uma tabela contendo a data e a magnitude calculada para as estrelas-alvo.
          </h3>
        </div>
      </div>
    `;
    document.body.appendChild(win);

    win.querySelector('.argus-close-btn').onclick = function() {
      win.remove();
    };

    // Movimentar janela estilo Win95
    let isDragging = false, offsetX = 0, offsetY = 0;
    win.querySelector('.title-bar').addEventListener('mousedown', function(e) {
      if (e.button !== 0) return;
      isDragging = true;
      const rect = win.getBoundingClientRect();
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;
      document.body.style.userSelect = 'none';
      function dragMove(ev) {
        if (!isDragging) return;
        win.style.left = (ev.clientX - offsetX + window.scrollX) + 'px';
        win.style.top = (ev.clientY - offsetY + window.scrollY) + 'px';
        win.style.right = '';
        win.style.bottom = '';
      }
      function dragUp() {
        isDragging = false;
        document.body.style.userSelect = '';
        document.removeEventListener('mousemove', dragMove);
        document.removeEventListener('mouseup', dragUp);
      }
      document.addEventListener('mousemove', dragMove);
      document.addEventListener('mouseup', dragUp);
    });
  };

  // Fechar janelas
  document.getElementById('recursos-close-btn').onclick = function() {
    document.getElementById('recursos-window').style.display = 'none';
  };
  document.getElementById('tutorial-salsaj-close-btn').onclick = function() {
    document.getElementById('tutorial-salsaj-window').style.display = 'none';
  };
  document.getElementById('historia-close-btn').onclick = function() {
    document.getElementById('historia-window').style.display = 'none';
  };
  document.getElementById('consulta-close-btn').onclick = function() {
    document.getElementById('consulta-window').style.display = 'none';
  };

  // Bot√µes da barra de tarefas
  document.getElementById('btn-salsaj').onclick = function() {
    const win = document.getElementById('recursos-window');
    win.style.display = 'block';
    win.style.zIndex = 4000 + Math.floor(Math.random()*1000);
  };
  document.getElementById('btn-tutorial-salsaj').onclick = function() {
    const win = document.getElementById('tutorial-salsaj-window');
    win.style.display = 'block';
    win.style.zIndex = 4000 + Math.floor(Math.random()*1000);
  };
  document.getElementById('btn-historia').onclick = function() {
    const win = document.getElementById('historia-window');
    win.style.display = 'block';
    win.style.zIndex = 4000 + Math.floor(Math.random()*1000);
  };
  document.getElementById('btn-consultar').onclick = function() {
    const win = document.getElementById('consulta-window');
    win.style.display = 'block';
    win.style.zIndex = 4000 + Math.floor(Math.random()*1000);
  };

  // Torna todas as janelas mov√≠veis
  function makeMovable(winId, titleBarId) {
    const win = document.getElementById(winId);
    const titleBar = document.getElementById(titleBarId);
    let isDragging = false, offsetX = 0, offsetY = 0;
    titleBar.addEventListener('mousedown', function(e) {
      if (e.button !== 0) return;
      isDragging = true;
      const rect = win.getBoundingClientRect();
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;
      document.body.style.userSelect = 'none';
      function dragMove(ev) {
        if (!isDragging) return;
        win.style.left = (ev.clientX - offsetX + window.scrollX) + 'px';
        win.style.top = (ev.clientY - offsetY + window.scrollY) + 'px';
        win.style.right = '';
        win.style.bottom = '';
      }
      function dragUp() {
        isDragging = false;
        document.body.style.userSelect = '';
        document.removeEventListener('mousemove', dragMove);
        document.removeEventListener('mouseup', dragUp);
      }
      document.addEventListener('mousemove', dragMove);
      document.addEventListener('mouseup', dragUp);
    });
  }
  makeMovable('recursos-window', 'recursos-title-bar');
  makeMovable('tutorial-salsaj-window', 'tutorial-salsaj-title-bar');
  makeMovable('historia-window', 'historia-title-bar');
  makeMovable('consulta-window', 'consulta-title-bar');

  // Calculadora de magnitude relativa
  document.getElementById('mag-form').onsubmit = function(e) {
    e.preventDefault();
    const mRef = parseFloat(document.getElementById('mag-ref').value);
    const fRef = parseFloat(document.getElementById('flux-ref').value);
    const fAlvo = parseFloat(document.getElementById('flux-alvo').value);
    if (isNaN(mRef) || isNaN(fRef) || isNaN(fAlvo) || fRef <= 0 || fAlvo <= 0) {
      document.getElementById('mag-result').textContent = 'Preencha todos os campos corretamente!';
      return;
    }
    const mAlvo = mRef - 2.5 * Math.log10(fAlvo / fRef);
    document.getElementById('mag-result').textContent = `Magnitude da estrela-alvo: ${mAlvo.toFixed(3)}`;
  };

  // Bot√£o para tocar o √°udio da janela Hist√≥ria
  document.getElementById('btn-audio-historia').onclick = function() {
    const audio = document.getElementById('audio-historia');
    audio.currentTime = 0;
    audio.play();
  };

  // Rel√≥gio Win95
  function updateClock() {
    const clock = document.getElementById('clock');
    const now = new Date();
    const h = String(now.getHours()).padStart(2, '0');
    const m = String(now.getMinutes()).padStart(2, '0');
    clock.textContent = `${h}:${m}`;
  }
  setInterval(updateClock, 1000);
  updateClock();

  // Jogo de identificar estrelas - HTML + JS
  const quizData = [
    { img: 'svul.png', answer: 'SV Vul' },
    { img: 'aql.png', answer: 'V1496 Aql' },
    { img: 'sgr.png', answer: 'V5738 Sgr' },
    { img: 'aq.png', answer: 'V1496 Aql' },
    { img: 'vu.png', answer: 'SV Vul' }
  ];
  const options = ['V5738 Sgr', 'SV Vul', 'V1496 Aql'];

  let current = 0;
  let score = 0;

  const gameWin = document.getElementById('game-quiz-window');
  const btnGame = document.getElementById('btn-game');

  function renderQuiz() {
    if (current >= quizData.length) {
      gameWin.innerHTML = `
        <div class="title-bar">
          <span class="title-bar-text">
            <img src="https://img.icons8.com/color/24/000000/controller.png" style="vertical-align:middle;"> Game - Resultado
          </span>
          <div class="title-bar-controls">
            <button aria-label="Fechar" id="game-close-btn">√ó</button>
          </div>
        </div>
        <div class="window-body" style="text-align:center;padding:24px;">
          <h2>Fim do Jogo!</h2>
          <p>Voc√™ acertou <b>${score}</b> de <b>${quizData.length}</b> estrelas.</p>
          <button class="win95-btn" id="game-restart-btn">Jogar Novamente</button>
        </div>
      `;
      document.getElementById('game-close-btn').onclick = () => { gameWin.style.display = 'none'; };
      document.getElementById('game-restart-btn').onclick = () => { current = 0; score = 0; renderQuiz(); };
      return;
    }
    document.getElementById('game-quiz-num').textContent = (current + 1);
    document.getElementById('game-quiz-img').src = quizData[current].img;
    document.getElementById('game-quiz-img').alt = quizData[current].answer;
    document.getElementById('game-feedback').textContent = '';
    const optionsDiv = document.getElementById('game-quiz-options');
    optionsDiv.innerHTML = '';
    options.forEach(opt => {
      const btn = document.createElement('button');
      btn.className = 'win95-btn game-opt-btn';
      btn.style.fontSize = '1em';
      btn.textContent = opt;
      btn.onclick = function () {
        if (opt === quizData[current].answer) {
          score++;
          document.getElementById('game-feedback').textContent = 'Correto!';
          document.getElementById('game-feedback').style.color = '#006400';
        } else {
          document.getElementById('game-feedback').textContent = `Errado! Resposta: ${quizData[current].answer}`;
          document.getElementById('game-feedback').style.color = '#b71c1c';
        }
        setTimeout(() => { current++; renderQuiz(); }, 900);
      };
      optionsDiv.appendChild(btn);
    });
    document.getElementById('game-close-btn').onclick = () => { gameWin.style.display = 'none'; };
  }

  // Ao clicar no bot√£o Game, abre o quiz
  if (btnGame) {
    btnGame.onclick = function () {
      current = 0;
      score = 0;
      gameWin.style.display = 'block';
      gameWin.style.zIndex = 7000 + Math.floor(Math.random() * 1000);
      renderQuiz();
    };
  }

  // Movimentar janela estilo Win95
  (function() {
    let isDragging = false, offsetX = 0, offsetY = 0;
    const titleBar = gameWin.querySelector('.title-bar');
    titleBar.addEventListener('mousedown', function(e) {
      if (e.button !== 0) return;
      isDragging = true;
      const rect = gameWin.getBoundingClientRect();
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;
      document.body.style.userSelect = 'none';
      function dragMove(ev) {
        if (!isDragging) return;
        gameWin.style.left = (ev.clientX - offsetX + window.scrollX) + 'px';
        gameWin.style.top = (ev.clientY - offsetY + window.scrollY) + 'px';
        gameWin.style.transform = '';
      }
      function dragUp() {
        isDragging = false;
        document.body.style.userSelect = '';
        document.removeEventListener('mousemove', dragMove);
        document.removeEventListener('mouseup', dragUp);
      }
      document.addEventListener('mousemove', dragMove);
      document.addEventListener('mouseup', dragUp);
    });
  })();
  </script>
</body>
</html>
